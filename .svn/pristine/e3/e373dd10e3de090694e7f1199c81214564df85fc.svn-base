<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>登录</title>
    <link rel="stylesheet" href="css/login.css" />
    <link rel="stylesheet" href="css/xinhua.css" />
    <link rel="stylesheet" href="css/public.css" />
</head>

<body>
    <div class="ding"></div>
    <div class="header">
        <div class="con clear">
            <div class="logo fl"><a href="#"><img src="images/logo.jpg" /></a></div>
        </div>
    </div>

    <div class="con">
        <div class="main">
            <div class="main-t">
                用户登录
            </div>
            <div class="main-b clear">
                <div class="mainl fl">
                    <div class="tb">
                        <div class="tb1 clear">
                            <span>用户名：</span><input type="text" id="user"><b class="b1"></b>
                        </div>
                        <div class="tb2 clear">
                            <span>请输入密码：</span><input type="password" id="pwd"><b class="b2"></b>
                        </div>
                        <input type="image" src="images/dl_btn1.jpg" class="btn btn1">
                        <input type="image" src="images/dl_btn2.jpg" class="btn btn2">
                        <a href="#">找回密码？</a>
                        <div id="em"></div>
                    </div>
                </div>
                <div class="mainr fl">
                    <div class="dl_title1">
                        我有会员卡，我要用会员卡号注册
                    </div>
                    <div class="dl_pic1">
                        <img height="132" src="images/2012.9dl_14.jpg" width="329">
                    </div>
                    <a href="#">
                        <img height="27" src="images/dl_btn3.jpg" width="70">
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="foot"></div>
  
</body>
<script src="js/jquery.js"></script>
<script>
    $(".ding").load("http://localhost/xinhua/data.html header");
    $(".foot").load("http://localhost/xinhua/data.html footer");
    class Login {
        constructor() {
            this.user = document.getElementById("user");
            this.pwd = document.getElementById("pwd");
            this.btn = document.querySelector(".btn1");
            this.buser = document.querySelector(".b1");
            this.bpwd = document.querySelector(".b2");
            this.em = document.querySelector("#em")
            this.addEvent()
        }
        addEvent() {
            var that = this;
            this.btn.onclick = function () {
               
                that.checkLocal();
            }
        }
        checkLocal() {
            this.Msg = localStorage.getItem("Msg");
            this.Msg = this.Msg ? JSON.parse(this.Msg) : [];
            var you = this.Msg.some(val=>{
                return val.user == this.user.value && val.pwd == this.pwd.value;
            })
            if(you){
                this.em.innerHTML = "";
                location.href = "index.html";
            }else{
                this.em.innerHTML = "登录失败";
                this.user.innerHTML="";
                this.pwd.innerHTML="";
            }
            localStorage.setItem("Msg", JSON.stringify(this.Msg))
        }
    }

    new Login();


</script>

</html>